<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.demo.mall.dao.TransportMapper">
    <delete id="deleteTransports">
        DELETE FROM tz_transport WHERE transport_id IN
        <foreach collection="ids" item="id" open="(" close=")" separator=",">
            #{id}
        </foreach>
    </delete>

    <select id="getTransportAndTransfeeAndTranscity" resultType="com.demo.mall.bean.model.Transport">
        SELECT port.*, fee.*, city.*, ta.*
        FROM tz_transport port
                 LEFT JOIN tz_transfee fee ON port.transport_id = fee.transport_id
                 LEFT JOIN tz_transcity city ON fee.transfee_id = city.transfee_id
                 LEFT JOIN tz_area ta ON city.city_id = ta.area_id
        WHERE port.transport_id = #{id}
        ORDER BY fee.transfee_id
    </select>

    <select id="getTransfeeFreeAndTranscityFreeByTransportId"
            resultType="com.demo.mall.bean.model.TransfeeFree">
        SELECT feefree.*, cityfree.*, ta.*
        FROM tz_transfee_free feefree
                 LEFT JOIN tz_transcity_free cityfree ON feefree.transfee_free_id = cityfree.transfee_free_id
                 LEFT JOIN tz_area ta ON cityfree.free_city_id = ta.area_id
        WHERE feefree.transport_id = #{transportId}
        ORDER BY feefree.transfee_free_id
    </select>

</mapper>